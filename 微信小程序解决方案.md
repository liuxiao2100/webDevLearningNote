## 微信小程序解决方案

[TOC]

### 方案一 -- 小程序端+知晓云

### 方案二 -- wafer2

#### Koa -- 基于 Node.js 平台的下一代web开发框架

服务端Demo采用koa.js框架编写。

Koa 并没有捆绑任何中间件， 而是提供了一套优雅的方法，帮助您快速而愉快地编写服务端应用程序。 

#### 优点

- 上手快，直接和微信开发工具集成，可以在工具直接上传代码，然后在线上发布。不用管理云服务器 CVM和做麻烦的设置。
- 目前见到是免费的。起码表面上服务器是免费的，但是你得花钱申请腾讯云的域名，还要域名做备案的时候，需要有公网的IP，所以有朋友反映也得购买腾讯云的云服务器 CVM。

#### 缺点

- 不能管理云主机，对于有一定基础的开发人员就会不够弹性。

#### 开发环境

- 免费使用

- 自动分配测试用二级域名：xxxxxxx.qcloud.la
- 自动部署免费 HTTPS
- 仅可用于线上调试，不可发布
- 代码部署、运行和数据库与生产环境完全分开
- 与微信开发工具打通，可一键部署、调试、重启和恢复代码

#### 生产环境

- 付费使用 
- 用户需购买或使用已有的腾讯云域名 
- 自动部署免费 HTTPS 
- 用于线上发布，不可调试 
- 使用微信开发工具上传代码，在腾讯云控制台操作部署，上传和发布分离，降低误操作风险


#### node方案前期步骤

1. 在[微信公众平台](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/)注册开公众平台开发者帐号

2. 注册后在帐号内新建小程序并完善信息，在开发设置里获得AppID ，并在开发者工具里点击腾讯云，按照指引开通腾讯云的wafer2开发环境![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180803/DHIF8k2HG1.bmp)

3. 初始化demo并上传。输入小程序 AppID，项目目录选择一个空的目录，接着选择【建立腾讯云 Node.js 启动模板】，点击确定创建小程序项目。

4. 安装依赖

   为方便本地调试，建议您在本地安装依赖。你也可以跳过这步直接使用开发者工具的“腾讯云”菜单中的“安装依赖”直接在线上安装依赖。 在您刚刚选择的目录打开 cmd 安装依赖：							 							 							 						

   ```
   cd server && npm install
   ```

5. 修改数据库密码![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180803/BjGe5kiCKB.png?imageslim)

6. 上传测试代码。使用微信开发者工具上传代码，完成开发环境的初始化，上传测试代码选择(部署后自动安装依赖)。
  ![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180803/h7Bf324j3H.bmp)

7. 修改本地请求域名。点击微信开发者工具右上角【详情】-【腾讯云状态】即可查看【开发环境 request 域名】，复制域名，填写在 clien/config.js 文件的 host 处，并保存。

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180803/l6HidcIIHI.png?imageslim)

8. 在模拟器中点击【登录】，看到显示“登录成功”，即为开通完成，可以开始你的其他开发了。 
9. 当前配置情况

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180803/1DBBJBDFKF.png?imageslim)

   #### 如何新建和修改数据库的库表

进入[腾讯云小程序控制台](https://console.cloud.tencent.com/lav2)，点击“phpMyAdmin”按钮打开 phpMyAdmin 登录界面，输入用户名（默认为 `root`）和密码（默认密码为小程序的 AppID）点击登录即可登录进图形化数据库操作界面。 

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180803/3Ea4LD4g9C.png?imageslim)









### 方案三 -- wafer

https://cloud.tencent.com/document/product/619/11445

#### 优点

- 完全控制你的云主机，如登录到Linux主机了解整个架构，帮助熟悉腾讯云的产品；
- 可以轻松使用原来自己的DNS服务器，避免再次备案；
- 更容易使用自己熟悉的语言和框架来开发；
- 哪天小程序做大了，更容易扩展（只是适合YY一下）。 

#### 缺点

- 门槛稍高，所以后来腾讯推出了开发者工具方案；
- 到期后要购买云服务器，有一定的财务负担； 

### 方案四 -- Senparc SDK

### 开发框架 -- WePY

让小程序支持组件化开发的框架，一个最受欢迎的小程序框架.

WePY 框架在开发过程中参考了 Vue 等现有框架的一些语法风格和功能特性，对原生小程序的开发模式进行了再次封装，更贴近于 MVVM 架构模式 

