### 网站访问过程

![web访问过程](http://pco3nqmct.bkt.clouddn.com/markdown/180730/kbIHKICbdJ.bmp)

一个普通网站访问的过程简单概括一下，对于我们普通的网站访问，涉及到的技术就是：
1. 用户操作浏览器访问，浏览器向服务器发出一个 HTTP 请求；
1. 服务器接收到 HTTP 请求，Web Server 进行相应的初步处理，使用服务器脚本生成页面；
1. 服务器脚本（利用Web Framework）调用本地和客户端传来的数据，生成页面；
1. Web Server 将生成的页面作为 HTTP 响应的 body，根据不同的处理结果生成 HTTP header，发回给客户端；
1. 客户端（浏览器）接收到 HTTP 响应，通常第一个请求得到的 HTTP 响应的 body 里是 HTML 代码，于是对 HTML 代码开始解析；
1. 解析过程中遇到引用的服务器上的资源（额外的 CSS、JS代码，图片、音视频，附件等），再向 Web Server 发送请求，Web Server 找到对应的文件，发送回来；
1. 浏览器解析 HTML 包含的内容，用得到的 CSS 代码进行外观上的进一步渲染，JS 代码也可能会对外观进行一定的处理；
1. 用户与页面交互（点击，悬停等等）时，JS 代码对此作出一定的反应，添加特效与动画；
1. 交互的过程中可能需要向服务器索取或提交额外的数据（局部的刷新，类似微博的新消息通知），一般不是跳转就是通过 JS 代码（响应某个动作或者定时）向 Web Server 发送请求，Web Server 再用服务器脚本进行处理（生成资源or写入数据之类的），把资源返回给客户端，客户端用得到的资源来实现动态效果或其他改变。

![web体系](http://pco3nqmct.bkt.clouddn.com/markdown/180730/eiJke83Lm7.bmp)

一整套体系，有前端(表示层)、有后端(逻辑层)、有数据库(存储层)，一个独立的网站就开始运作了。甚至还可以用Web Services去查一下别人网站的数据，综合一下展示出来

#### 网站整体概念图

![网站整体概念图](http://pco3nqmct.bkt.clouddn.com/markdown/180730/C5lJfmmk6j.png?imageslim)

其中，红色部分是需要我们去学习掌握的语言，需要利用这些语言实现网站前后台功能；蓝色部分是我们可以利用的辅助工具、软件架构，只需要了解用法，进行适当配置，使其在合适的位置发挥功能即可。


### 前端技术点

#### 1. HTML和CSS

* HTML 就是一种标记语言。电脑浏览器拿到html文件后进行渲染。单纯的html页面类似这样：

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180730/9bHFgmjggJ.bmp)

* 现行通用的规定样式的语言是CSS。可以用它写一些定义样式的代码，然后在 html 文件里用一个<link>标签把这些规定样式的 CSS 代码与表达内容语义的 HTML 代码关联起来，然后你就能看到一个符合人类正常审美的页面：

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180730/6Eh6m8h7CJ.bmp)

* CSS 代码的格式基本是`属性:值`，比如：

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180730/KJ3le816dI.bmp)

#### 2. HTML 5 与 XHTML

* HTML代码里能有什么标签，标签怎么写，标签可以有什么属性这些东西有一定的共识，建立一个通行的标准，HTML5 就是其中一个比较新的标准。
* XHTML，就是 HTML 的近亲 XML 和 HTML 自己的杂交品种，对语法要求比较严格，并且为了兼容 XML，在语法上与 HTML 有一些不同

#### 3. JavaScript 与浏览器脚本

* HTML + CSS，我们得到的只是一个静态的页面，没有动画
* JavaScript可以给页面添加一些动态的效果

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180730/bEcF9Fb226.bmp)

#### 4. AJAX (Asynchronous Javascript And XML) -- 异步JavaScript和XML

利用已有的js/css/xml等技术达到前端数据及时更新的效果，使用户无需刷新网页即可保持页面数据最新的状态。

#### 5. 文档对象模型（Document Object Model，简称DOM）

DOM是一种独立的规范。
浏览器作为前端的展示工具，按照DOM规范将页面划分为不同层次结构，形成多个可操作的对象。例如,window对象、history对象、link对象等。 

### 后端技术点

#### 1. Web Server 和 Web Services，cgi通讯接口

* 浏览器给服务器发一个请求，服务器不是一看就知道怎么响应的。首先这些请求和响应要有一个通用的写法，也就是要有一个协议，常用的是 HTTP 协议。
* HTTP 响应里还包括很多东西，比如 Content-type 表示服务器发过来的文件类型是什么（文本？动画？图片？音频？），这样发过去了人家浏览器好知道怎么展示给用户看。类型是什么（文本？动画？图片？音频？），这样发过去了人家浏览器好知道怎么展示给用户看。服务器怎么知道按协议要写什么东西进去呢，这就是 Web Server 干活的时候了。
* 服务器端，需要接收前端访问请求,根据请求类型分发给指定模块进行处理,并完成将处理结果返回给前端的工作,这就是反向代理，也就是web server，例如Nginx/Apache等.
* web server本身不做网站内容的解析和生成工作，重点在于处理复杂的网络请求,应对海量的网络连接。起到后台与前端之间搭建网络桥梁的作用，通过通讯协议，与前端进行数据交互，而数据来源，由后台其他处理程序和数据库等提供。
* web server可以使用Nginx/Apache/tomcat/IIS/lighttpd等现成的工具,也可利用node.js等平台添加模块自己形成满足自己要求的代理工具,甚至自己动手从头开发也可以,完全依据自己喜好和水平.
* HTTP响应：

![mark](http://pco3nqmct.bkt.clouddn.com/markdown/180730/ifm1B3bC4C.bmp)


* 客户端与服务器的交互的主体、客体、载体是五花八门的：


```
1. 服务器可以是大型机也可以是个人电脑，只要能跑相应的程序就行
1. 客户端像前面举的栗子里一样，可以是各种软件，而且这些软件不一定运行在个人电脑上，也可以是手机、平板、智能穿戴设备等等
1. 有时候不是传生成好的 HTML 或者其他服务器上已经有的文件，而是传输经过一定逻辑处理后生成的字符串或者其他各种封装好的数据
```

- 我们需要先对这些机器需要怎么交互达成一定共识，再让它们进行交流。要让这些形形色色的机器能够通过网络进行交互，我们就需要指明一种协议（比如 HTTP/HTTPS）和一种数据封装格式（比如 HTML/XML），
```
Web Server 提供的 Web Service，指的就是这种协议+格式的交流体系。
Web Services，提供数据型服务或者功能型服务。如：
1、当你的网站开放一个Web Services接口，这个时候就可以允许别人查询到你数据库的数据。
2、当你的网站使用别人的Web Services时，这个时候就可以查询到别人的数据。
```

- 不过 Web Service 的生态系统和 HTML 的标准不一样，用户可以选择的协议和数据封装格式更多，普通的网站访问用的 HTTP + HTML 只是其中一种，一些封闭系统内的交流还可以自己定义一个协议和格式来用（比如 QQ）。
 
- 除了提供 Web Service， Web Server 还会兼顾很多功能，包括提供缓存，平衡负载，这样在访问量比较大的时候能有有条不紊地接客。常见的现成的 Web Server 有开源的 Apache、Nginx和微软的IIS，你也可以用一些工具（比如 Node.js ）自己定制一个。因为 Web Server 需要比较好的性能，所以投产时用的 Web Server 通常是C/C++/Java写的，但是其实很多语言都可以写，而且配合上语言底层的优化和好的模型，其他语言写的 Web Server 也可以有不错的表现。

- cgi/fastcgi 通讯接口。web server接收到前端请求之后，需要将这些请求的内容分发给具体的处理程序进行数据处理。与前端和后台之间的通讯协议相似，此处两者之间也需要定义双方的通讯协议。毕竟，web server种类那么多，后台处理程序的种类也那么多，不统一交流暗号，怎么进行交互呢。cgi就是早期的双方交互协议，称之为通用网关接口。

- web server接收到前端请求之后,按照cgi的规则将数据进行整理后发送给后台处理程序,后台处理程序接受到数据之后,按照cgi的规则进行解析/处理,然后再次按照cgi规则将处理好的数据返回给web server,完成交互。

#### 2. PHP ，服务器脚本，Web Framework

- 服务器脚本，可以处理客户端上传过来的文件，可以接受发过来的各种请求去操作服务器本地的文件或数据库
- PHP 就是一种常见的用来写服务器脚本的语言，其实只要是能拿来写大家传输数据的通用接口（CGI）的语言都可以用来写服务器脚本
- 为了方便，我们在写服务器脚本的时候，通常还会用同个语言写的 Web Framework 来处理各种细节，防御一些常见的攻击，提供跨站认证（比如用已有的微博账号注册其他网站）的接口，利用cookie处理登陆状态和用户设置，生成网页模版之类的。


#### 3. 数据库和SQL

- 每一个网站上面可能含有大量的数据内容，包括文字、图片、多媒体等，需要按照一定的格式存储在一个地方，在我们通过网页访问这些内容时，可以快速的调用。
数据库就实现了这种功能，我们可以把一堆乱七八糟的东西按照设计好的规则扔进数据库，然后根据需要读写就可以了。

- SQL语言是专门用来解决各种不同的编程语言和不同的数据库之间进行通讯的结构化查询语言.
任何编程语言都可使用SQL语言来操作任何支持SQL语言的数据库. 


### 常用 Web Server
1. Apache
1. Nginx
1. IIS
1. node.js

### 常用服务器脚本语言及对应的常见的web framework
1. PHP，开源
2. Python，对应常见的 Framework 包括知乎和Quora有用到的 Tornado（其实是自带 Framework 的 Web Server），社区很成熟的 Django （用户包括 Instagram、Pinterest）等
3. Ruby，一般都用 Rails 这个 Framework，用户包括 Github、早期的 Twitter 等
4. 逆天的 JavaScript，有了 Node.js 这个平台，Web Server、服务器脚本和浏览器脚本全都可以用
 JavaScript 来写……Node.js上最常用的 Framework是Express
5. 微软家的则跟着 ASP.NET 转移到了C# 或者 Visual Basic
6. Erlang，擅长大规模的并发，不少游戏公司拿来写服务器，靠几十个工程师支撑几亿用户的WhatsApp也是用的这个~

### 常见的架构
1. LAMP = Linux + Apache + MySQL + PHP（P还可能是Python或Perl。有时候L会改成W=Windows。），也就是服务器上的操作系统是 Linux，Web Server 用 Apache，数据库用 MySQL，服务器脚本用 PHP，这些都是开源技术，网站起步时用起来的成本会比较低，所以是普通网站里非常常见的架构（虽然对于发展得很大的网站会遇到很多瓶颈），Facebook就是这种，淘宝也曾经是。
2. J2EE，Java 世界的架构，通常是企业用的（银行、大型公司,.etc），比较常见地还会搭配一种 UNIX 做操作系统，Apache 做 Web Server，Tomcat 转换 JSP 到 Java 给服务器程序用（其实它也自带 Web Server），Oracle 数据库等等。不一定拿来建站，常常用来提供企业里的各种需要用到网络的业务。我们学校教务系统就是用J2EE做的=。= 淘宝现在也是从LAMP转型到了这个。
3. ASP.NET，微软家的架构，通常会搭配 Windows Server 操作系统，SQL Server 数据库，IIS 做 Web Server。StackOverflow和京东（曾经）就是这个架构。
4. 神奇的MEAN架构，MongoDB做数据库，Express做 Web Framework，Angular 做前端的 JavaScript 框架，Node.js 用于编写 Web Server。神奇之处在于这几个东西的语言都是 JavaScript （MongoDB的实现不是，但与外界沟通用的语言是）。因为是比较新的架构，还有待时间的考验，不过被很多人（尤其是靠 JavaScript 吃饭的前端程序猿们）热切关注。


```
一般来说重点不在技术而且在乎成本的新网站比较喜欢用 LAMP，重视安全稳定和速度的企业和机构喜欢 J2EE，想省事的网站喜欢 ASP.NET，比较 Geek 的网站和创业公司喜欢折腾各种 Python、Ruby、Node.js世界的东西，Google 这样现成的技术都解决不了需求的超大型网站就自己折腾解决方案。
```

### 平台和框架

#### 平台/引擎/运行环境
开发人员将编码中核心部分和经常重复利用的部分抽离出来,做成一个个模块/库等形式,最终封装成一个个开发平台.例如前面提到的node.js,以及经常见到的.net等.
开发平台中集成了大量核心或者经常被用到的功能,不需要新的开发人员重复开发,只需要安装开发平台,并在自己的代码中调用平台提供的功能即可.这也是为什么我们安装很多软件的时候,总是提醒我们安装.net平台,因为这些软件调用了.net平台中提供的功能.

#### 框架
服务器后台存在多种多样的框架.例如java的SSH/python的django、web.py等等.
框架将大量需要重复的编码工作实现在框架中，减少二次开发的复杂度，这点与平台有点类似。

#### 区别
框架实现了完成该功能的整体架构搭建,例如网站后台框架就实现了各种session会话处理等机制,只需开发人员在整体架构预留的自定义空隙添加个人代码,与框架互补形成完整的网站后台;平台实现了具体细节处理代码的编写,并没有实现整体的功能,需要开发人员自己利用平台中提供的零件组装完整的功能.平台就像一个大零件箱，里面有各种型号的小零件，是最基本的组件。 框架是一个大功能的骨架，可以借助某些平台提供的小零件进行开发。 框架中非公共部分，也就是网站个性化功能实现的部分，就是开发人员下一步需要自己实现的后台处理程序了。框架往往和后台处理程序选择的语言相关,也就是说框架通常是针对某种语言而开发的,用于减轻该种语言开发网站的复杂度。